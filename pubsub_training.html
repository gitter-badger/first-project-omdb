<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PubSup example page</title>
    <meta name="mobile-web-app-capable" content="yes">
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet"/>
</head>
<body>
<div id="content">
</div>
<script type="text/javascript" src="bower_components/pubsubjs/pubsub.js"></script>

<script type="text/javascript">
    var pubSubTraining = Pubsub.create();
/* -----------------------БЛОК для ПУБЛІКАЦІЇ----------------------- */
    (function() {
        var movieData = {
            creationDate: 1973,
            mainActor: 'Bruce Lee',
            movieName: 'Enter the Dragon',
            producer: 'Robert Clouse'
        };
        setTimeout(function() {
            pubSubTraining.publish('communicate.event.data', null, movieData);
        }, 100);
    } ()); // главное не забывать запускать функцию ;)
/* -----------------------БЛОК для ПІДПИСКИ----------------------- */
    (function() {
        pubSubTraining.subscribe('communicate.event.data', function(context, data) {
            console.log('Main movie info: ' + 'Name: ' + data.movieName + '; Date: ' + data.creationDate +
            '; Producer: ' + data.producer + '; Actor: ' + data.mainActor + '.');

        if(window.localStorage) {
            window.localStorage.setItem('receivedData', JSON.stringify(data));
        }

        document.getElementById('content').innerHTML = 'Main movie info:' + '</br>' + 'Name: ' + data.movieName + '</br>' +
                'Date: ' + data.creationDate + '</br>' + 'Producer: ' + data.producer + '</br>' + 'Actor: ' + data.mainActor;
        });
    } ());

</script>
</body>
</html>
